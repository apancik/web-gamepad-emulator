<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

		<title>Web Gamepad Emulator</title>
		<style>
			body {
				touch-action: none;
			}

			* {
				-webkit-user-select: none;
				-webkit-touch-callout: none;
				user-select: none;
			}
		</style>
	</head>
	<body>
		<svg width="100%" viewBox="0 0 818 325" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
			<defs>
				<radialGradient cx="50%" cy="49.9999996%" fx="50%" fy="49.9999996%" r="50.4195609%" id="radialGradient-1">
					<stop stop-color="#000000" offset="0%"></stop>
					<stop stop-color="#DCDCDC" offset="38.88889%"></stop>
					<stop stop-color="#EEEEE9" offset="100%"></stop>
				</radialGradient>
				<radialGradient cx="50%" cy="49.9999996%" fx="50%" fy="49.9999996%" r="50.5787057%" id="radialGradient-2">
					<stop stop-color="#F3F3F1" offset="0%"></stop>
					<stop stop-color="#7F7F7E" offset="94%"></stop>
					<stop stop-color="#E6E6E3" offset="100%"></stop>
				</radialGradient>
				<linearGradient x1="50%" y1="115.635764%" x2="50%" y2="-23.7556545%" id="linearGradient-3">
					<stop stop-color="#00DEA5" offset="0%"></stop>
					<stop stop-color="#00F8B9" offset="100%"></stop>
				</linearGradient>
				<radialGradient cx="49.9999868%" cy="49.9999933%" fx="49.9999868%" fy="49.9999933%" r="53.3037054%" gradientTransform="translate(0.500000,0.500000),scale(1.000000,0.971004),translate(-0.500000,-0.500000)" id="radialGradient-4">
					<stop stop-color="#303638" offset="0%"></stop>
					<stop stop-color="#424A4F" offset="100%"></stop>
				</radialGradient>
				<radialGradient cx="50.000024%" cy="50%" fx="50.000024%" fy="50%" r="53.4756096%" id="radialGradient-5">
					<stop stop-color="#303638" offset="0%"></stop>
					<stop stop-color="#424A4F" offset="100%"></stop>
				</radialGradient>
			</defs>
			<g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
				<path d="M267.597364,163.999999 C267.597364,203.395936 246.579883,239.799282 212.462002,259.497251 C178.34412,279.195219 136.309156,279.195219 102.191274,259.497251 C68.0733926,239.799282 47.0559116,203.395936 47.0559116,163.999999 C47.0559116,103.099158 96.4257975,53.7292726 157.326638,53.7292726 C218.227479,53.7292726 267.597364,103.099158 267.597364,163.999999 L267.597364,163.999999 Z" id="path3212" stroke="url(#radialGradient-2)" stroke-width="3.82884457" fill="url(#radialGradient-1)" fill-rule="nonzero"></path>
				<rect id="rect3217" stroke="#FDFDFA" stroke-width="0.999999967" fill="#F4F4F1" fill-rule="nonzero" transform="translate(617.552079, 125.499988) rotate(-45.000000) translate(-617.552079, -125.499988) " x="538.052077" y="92.9999873" width="159.000004" height="65.0000017" rx="32.5000009"></rect>
				<g id="use3219" transform="translate(618.000000, 121.000000)" fill="#F4F4F1" fill-rule="nonzero" stroke="#FDFDFA" stroke-width="0.999999967">
					<rect id="rect3217" transform="translate(79.552079, 79.499988) rotate(-45.000000) translate(-79.552079, -79.499988) " x="0.0520771789" y="46.9999873" width="159.000004" height="65.0000017" rx="32.5000009"></rect>
				</g>
				<path d="M612.42704,159.000001 C612.42704,174.947223 599.499262,187.875001 583.55204,187.875001 C567.604818,187.875001 554.67704,174.947223 554.67704,159.000001 C554.67704,143.052779 567.604818,130.125001 583.55204,130.125001 C599.499262,130.125001 612.42704,143.052779 612.42704,159.000001 Z" id="path3235" stroke="#EBEBE8" stroke-width="1.00000001" fill="#1A1A1A" fill-rule="nonzero"></path>
				<path d="M609.67704,159.000001 C609.67704,173.42844 597.980479,185.125001 583.55204,185.125001 C569.123601,185.125001 557.42704,173.42844 557.42704,159.000001 C557.42704,144.571562 569.123601,132.875001 583.55204,132.875001 C597.980479,132.875001 609.67704,144.571562 609.67704,159.000001 Z" id="path3237" stroke="#00AB7F" stroke-width="2.00000007" fill="url(#linearGradient-3)" fill-rule="nonzero"></path>
				<path d="M692.92704,235.000001 C692.92704,250.947223 679.999262,263.875001 664.05204,263.875001 C648.104818,263.875001 635.17704,250.947223 635.17704,235.000001 C635.17704,219.052779 648.104818,206.125001 664.05204,206.125001 C679.999262,206.125001 692.92704,219.052779 692.92704,235.000001 Z" id="path3245" stroke="#EBEBE8" stroke-width="1.00000001" fill="#1A1A1A" fill-rule="nonzero"></path>
				<path d="M690.17704,235.000001 C690.17704,249.42844 678.480479,261.125001 664.05204,261.125001 C649.623601,261.125001 637.92704,249.42844 637.92704,235.000001 C637.92704,220.571562 649.623601,208.875001 664.05204,208.875001 C678.480479,208.875001 690.17704,220.571562 690.17704,235.000001 Z" id="path3247" stroke="#BA853D" stroke-width="2.00000007" fill="#FFBB58" fill-rule="nonzero"></path>
				<path d="M760.42704,167.000001 C760.42704,182.947223 747.499262,195.875001 731.55204,195.875001 C715.604818,195.875001 702.67704,182.947223 702.67704,167.000001 C702.67704,151.052779 715.604818,138.125001 731.55204,138.125001 C747.499262,138.125001 760.42704,151.052779 760.42704,167.000001 Z" id="path3251" stroke="#EBEBE8" stroke-width="1.00000001" fill="#1A1A1A" fill-rule="nonzero"></path>
				<path d="M757.67704,167.000001 C757.67704,181.42844 745.980479,193.125001 731.55204,193.125001 C717.123601,193.125001 705.42704,181.42844 705.42704,167.000001 C705.42704,152.571562 717.123601,140.875001 731.55204,140.875001 C745.980479,140.875001 757.67704,152.571562 757.67704,167.000001 Z" id="path3253" stroke="#C72B3E" stroke-width="2.00000007" fill="#FF4856" fill-rule="nonzero"></path>
				<path d="M679.42704,91.500001 C679.42704,107.447223 666.499262,120.375001 650.55204,120.375001 C634.604818,120.375001 621.67704,107.447223 621.67704,91.500001 C621.67704,75.5527788 634.604818,62.625001 650.55204,62.625001 C666.499262,62.625001 679.42704,75.5527788 679.42704,91.500001 Z" id="path3257" stroke="#EBEBE8" stroke-width="1.00000001" fill="#1A1A1A" fill-rule="nonzero"></path>
				<path d="M676.67704,91.500001 C676.67704,105.92844 664.980479,117.625001 650.55204,117.625001 C636.123601,117.625001 624.42704,105.92844 624.42704,91.500001 C624.42704,77.0715619 636.123601,65.375001 650.55204,65.375001 C664.980479,65.375001 676.67704,77.0715619 676.67704,91.500001 Z" id="path3259" stroke="#0054B3" stroke-width="2.00000007" fill="#0075FA" fill-rule="nonzero"></path>
				<rect id="rect3307" stroke="#E2E2DF" stroke-width="1.83643024" fill="#1A1A1A" fill-rule="nonzero" transform="translate(348.608787, 194.062007) rotate(-45.000000) translate(-348.608787, -194.062007) " x="314.413577" y="184.322865" width="68.3904208" height="19.4782855" rx="7.3457208"></rect>
				<path d="M140.57544,88.95464 C136.12097,88.95464 132.53488,92.54074 132.53488,96.99522 L132.53488,139.20824 L90.32186,139.20824 C85.86738,139.20824 82.28128,142.79433 82.28128,147.2488 L82.28128,180.7512 C82.28128,185.20567 85.86738,188.79176 90.32186,188.79176 L132.53488,188.79176 L132.53488,231.00478 C132.53488,235.45926 136.12097,239.04536 140.57544,239.04536 L174.07784,239.04536 C178.53231,239.04536 182.1184,235.45926 182.1184,231.00478 L182.1184,188.79176 L224.33142,188.79176 C228.7859,188.79176 232.372,185.20567 232.372,180.7512 L232.372,147.2488 C232.372,142.79433 228.7859,139.20824 224.33142,139.20824 L182.1184,139.20824 L182.1184,96.99522 C182.1184,92.54074 178.53231,88.95464 174.07784,88.95464 L140.57544,88.95464 Z" id="rect3221" stroke="#8E979E" stroke-width="0.93806696" fill="#1A1A1A" fill-rule="nonzero"></path>
				<path d="M143.57956,95.91492 C140.05118,95.91492 137.21068,99.12897 137.21068,103.12136 L137.21068,143.69459 L95.83605,143.69459 C92.3077,143.69459 89.46717,146.90864 89.46717,150.90101 L89.46717,177.06028 C89.46717,181.05264 92.3077,184.26669 95.83605,184.26669 L137.21068,184.26669 L137.21068,225.06555 C137.21068,229.05793 140.05118,232.272 143.57956,232.272 L170.43559,232.272 C173.96396,232.272 176.80446,229.05793 176.80446,225.06555 L176.80446,184.26669 L218.98812,184.26669 C222.51646,184.26669 225.35699,181.05264 225.35699,177.06028 L225.35699,150.90101 C225.35699,146.90864 222.51646,143.69459 218.98812,143.69459 L177.48132,143.69459 L177.48132,103.12136 C177.48132,99.12897 174.6408,95.91492 171.11244,95.91492 L143.57956,95.91492 Z" id="path3319" stroke="#63686B" stroke-width="1.91442239" fill="#4D5254" fill-rule="nonzero"></path>
				<path d="M141.71636,131.52693 C140.30056,128.68711 142.56543,124.21886 142.56543,124.21886 L147.28482,114.75281 L152.00416,105.28677 C152.00416,105.28677 153.89192,101.6307 156.72354,101.6307 C159.55516,101.6307 161.44289,105.28677 161.44289,105.28677 L166.16226,114.75281 L170.88163,124.21886 C170.88163,124.21886 173.43321,128.52109 172.01739,131.36091 C170.60161,134.20075 166.16226,133.68493 166.16226,133.68493 L156.72354,133.68493 L147.28482,133.68493 C147.28482,133.68493 143.13218,134.36673 141.71636,131.52693 Z" id="path3924" stroke-opacity="0.8627451" stroke="#4F5457" stroke-width="2.06114793" fill="url(#radialGradient-4)" fill-rule="nonzero"></path>
				<g id="use3931" transform="translate(157.000000, 209.262190) scale(-1, 1) rotate(-180.000000) translate(-157.000000, -209.262190) translate(141.000000, 192.762190)" fill="url(#radialGradient-4)" fill-rule="nonzero" stroke="#4F5457" stroke-opacity="0.8627451" stroke-width="2.06114793">
					<path d="M0.71636,30.52693 C-0.69944,27.68711 1.56543,23.21886 1.56543,23.21886 L6.28482,13.75281 L11.00416,4.28677 C11.00416,4.28677 12.89192,0.6307 15.72354,0.6307 C18.55516,0.6307 20.44289,4.28677 20.44289,4.28677 L25.16226,13.75281 L29.88163,23.21886 C29.88163,23.21886 32.43321,27.52109 31.01739,30.36091 C29.60161,33.20075 25.16226,32.68493 25.16226,32.68493 L15.72354,32.68493 L6.28482,32.68493 C6.28482,32.68493 2.13218,33.36673 0.71636,30.52693 Z" id="path3924"></path>
				</g>
				<g id="use3933" transform="translate(110.966917, 163.229110) rotate(-90.000000) translate(-110.966917, -163.229110) translate(94.966917, 146.729110)" fill="url(#radialGradient-4)" fill-rule="nonzero" stroke="#4F5457" stroke-opacity="0.8627451" stroke-width="2.06114793">
					<path d="M0.71636,30.52693 C-0.69944,27.68711 1.56543,23.21886 1.56543,23.21886 L6.28482,13.75281 L11.00416,4.28677 C11.00416,4.28677 12.89192,0.6307 15.72354,0.6307 C18.55516,0.6307 20.44289,4.28677 20.44289,4.28677 L25.16226,13.75281 L29.88163,23.21886 C29.88163,23.21886 32.43321,27.52109 31.01739,30.36091 C29.60161,33.20075 25.16226,32.68493 25.16226,32.68493 L15.72354,32.68493 L6.28482,32.68493 C6.28482,32.68493 2.13218,33.36673 0.71636,30.52693 Z" id="path3924"></path>
				</g>
				<g id="use3935" transform="translate(202.466917, 163.229110) rotate(-90.000000) translate(-202.466917, -163.229110) translate(186.466917, 146.229110)" fill="url(#radialGradient-4)" fill-rule="nonzero" stroke="#4F5457" stroke-opacity="0.8627451" stroke-width="2.06114793">
					<g id="use3931" transform="translate(16.000000, 17.262190) scale(-1, 1) rotate(-180.000000) translate(-16.000000, -17.262190) translate(0.000000, 0.762190)">
						<path d="M0.71636,30.52693 C-0.69944,27.68711 1.56543,23.21886 1.56543,23.21886 L6.28482,13.75281 L11.00416,4.28677 C11.00416,4.28677 12.89192,0.6307 15.72354,0.6307 C18.55516,0.6307 20.44289,4.28677 20.44289,4.28677 L25.16226,13.75281 L29.88163,23.21886 C29.88163,23.21886 32.43321,27.52109 31.01739,30.36091 C29.60161,33.20075 25.16226,32.68493 25.16226,32.68493 L15.72354,32.68493 L6.28482,32.68493 C6.28482,32.68493 2.13218,33.36673 0.71636,30.52693 Z" id="path3924"></path>
					</g>
				</g>
				<path d="M174.315693,163.999974 C174.315693,173.382786 166.70942,180.989058 157.326608,180.989058 C147.943796,180.989058 140.337524,173.382786 140.337524,163.999974 C140.337524,154.617161 147.943796,147.010889 157.326608,147.010889 C166.70942,147.010889 174.315693,154.617161 174.315693,163.999974 Z" id="path3943" stroke-opacity="0.86170206" stroke="#4F5457" stroke-width="2.36189711" fill="url(#radialGradient-5)" fill-rule="nonzero"></path>
				<rect id="rect4170" stroke="#E2E2DF" stroke-width="1.83643024" fill="#1A1A1A" fill-rule="nonzero" transform="translate(443.666400, 194.062007) rotate(-45.000000) translate(-443.666400, -194.062007) " x="409.47119" y="184.322865" width="68.3904208" height="19.4782855" rx="7.3457208"></rect>
				<g id="Map" transform="translate(0.500000, 0.525126)" opacity="0">
					<g id="Group" transform="translate(157.000000, 164.474874) rotate(45.000000) translate(-157.000000, -164.474874) translate(46.000000, 53.974874)">
						<rect id="key-up" fill="#FA6400" x="8.52651283e-14" y="-2.84217094e-14" width="110.5" height="110.5"></rect>
						<rect id="key-left" fill="#F7B500" x="8.52651283e-14" y="110.5" width="110.5" height="110.5"></rect>
						<rect id="key-down" fill="#B620E0" x="111" y="110.5" width="110.5" height="110.5"></rect>
						<polygon id="key-right" fill="#E02020" points="111 0.5 199.991901 22.008099 221.5 111 111 111"></polygon>
					</g>
					<g id="Group" transform="translate(655.096194, 162.000000) rotate(45.000000) translate(-655.096194, -162.000000) translate(542.596194, 46.000000)">
						<rect id="key-x" fill="#32C5FF" x="2.84217094e-13" y="11" width="110.5" height="110.5"></rect>
						<rect id="key-y" fill="#0091FF" x="1.70530257e-13" y="121.5" width="110.5" height="110.5"></rect>
						<rect id="key-b" fill="#6236FF" x="114.269769" y="111.350505" width="110.5" height="110.5"></rect>
						<rect id="key-a" fill="#44D7B6" x="114.269769" y="0.350505063" width="110.5" height="110.5"></rect>
					</g>
					<rect id="key-select" fill="#44D7B6" x="282.5" y="140.474874" width="110.5" height="110.5"></rect>
					<rect id="key-start" fill="#6DD400" x="393.5" y="140.474874" width="110.5" height="110.5"></rect>
				</g>
			</g>
		</svg>

		<script>
			function submitKey(keyId, state) {
				const request = new XMLHttpRequest();
				request.open("POST", "/", true);
				request.setRequestHeader("Content-Type", "application/json");
				request.send(
					JSON.stringify({
						key: keyId.split("-")[1],
						state: state,
					})
				);
			}

			["key-up", "key-right", "key-down", "key-left", "key-select", "key-start", "key-a", "key-b", "key-x", "key-y"].forEach((keyId) => {
				let element = document.getElementById(keyId);

				element.addEventListener("touchstart", (event) => {
					submitKey(keyId, "down");
					event.returnValue = false;
				});

				element.addEventListener("touchend", (event) => {
					submitKey(keyId, "up");
					event.returnValue = false;
				});
			});
		</script>
	</body>
</html>
